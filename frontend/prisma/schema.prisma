// prisma/schema.prisma

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("PRISMA_DATABASE_URL") // Folosește URL-ul de la Vercel
  directUrl = env("POSTGRES_URL") // Necesar pentru Vercel Postgres
}

// 1. Tabel pentru formularul de CONTACT / COMANDĂ
model Lead {
  id        Int      @id @default(autoincrement())
  nume      String
  prenume   String
  email     String
  telefon   String
  firma     String?  // Opțional
  mesaj     String?  // Opțional
  pachetAds String?  // ex: GOLD
  pachetWeb String?  // ex: Magazin Mic
  status    String   @default("Nou") // Nou, Contactat, Finalizat
  createdAt DateTime @default(now())
}

// 2. Tabel pentru formularul de AUDIT
model AuditRequest {
  id        Int      @id @default(autoincrement())
  website   String
  platforme String   // Vom salva array-ul ca string (ex: "Facebook, TikTok")
  buget     String
  nume      String
  email     String
  telefon   String
  status    String   @default("Nou")
  createdAt DateTime @default(now())
}

// 3. Tabel pentru descărcări EBOOK
model EbookLead {
  id        Int      @id @default(autoincrement())
  nume      String
  email     String
  createdAt DateTime @default(now())
}

// 4. Tabel pentru TEXTE WEBSITE (Editor)
model SiteContent {
  id          Int    @id @default(autoincrement())
  sectionKey  String @unique // ex: "home_hero"
  content     Json   // Salvăm tot conținutul secțiunii ca un obiect JSON
  updatedAt   DateTime @updatedAt
}

// 5. Tabel pentru ADMIN (Login)
model Admin {
  id       Int    @id @default(autoincrement())
  email    String @unique
  password String // Aici vom salva parola (ideal criptată, momentan o punem simplă)
}

// 6. Logăm deciziile utilizatorilor legate de Cookies
model CookieLog {
  id        Int      @id @default(autoincrement())
  visitorId String   // Un ID unic generat pentru vizitator
  accepted  Boolean  // true = a acceptat, false = a refuzat
  createdAt DateTime @default(now())
}